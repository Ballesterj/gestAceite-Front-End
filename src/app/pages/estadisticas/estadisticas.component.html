<div class="estadisticas-container">
    <h2 class="titulo">{{ title }}</h2>
  
    <!-- Filtro por Año -->
    <mat-form-field appearance="fill">
      <mat-label>Seleccionar Año</mat-label>
      <mat-select [(value)]="selectedYear" (selectionChange)="onYearChange()">
        <mat-option [value]="'all'">Todos los años</mat-option>
        <mat-option *ngFor="let year of availableYears" [value]="year">{{ year }}</mat-option>
      </mat-select>
    </mat-form-field>
  
    <div class="grid">
      <div *ngFor="let stat of [
        { title: 'Total de kilos cosechados', value: totalOlives + ' kg' },
        { title: 'Media anual de kilos por olivo', value: averageOlives.toFixed(0) + ' kg/año' },
        { title: 'Rendimiento medio de aceite', value: averageYield.toFixed(1) + '%' },
        { title: 'Aceite total estimado', value: totalOilInLiters.toFixed(2) + ' L' },
        { title: 'Producción por hectárea', value: productionPerHectare.toFixed(0) + ' kg/ha' },
        { title: 'Total de kilos procesados', value: totalProcessedOlives + ' kg' }
      ]">
        <mat-card class="stat-card">
          <mat-card-title>{{ stat.title }}</mat-card-title>
          <mat-card-content>{{ stat.value }}</mat-card-content>
        </mat-card>
      </div>
    </div>
  
    <!-- Gráfica de Producción Anual -->
    <mat-card class="chart-card">
      <mat-card-title>Evolución anual de la producción</mat-card-title>
      <mat-card-content>
        <canvas baseChart [data]="chartData" [options]="chartOptions" chartType="bar"></canvas>
      </mat-card-content>
    </mat-card>
  
    <!-- Grado promedio de la cosecha -->
    <mat-card class="chart-card">
      <mat-card-title>Grado promedio de la cosecha</mat-card-title>
      <mat-card-content>
        <canvas baseChart [data]="gradeChartData" [options]="gradeChartOptions" chartType="line"></canvas>
      </mat-card-content>
    </mat-card>
  
    <!-- Relación aceitunas vs aceite -->
    <mat-card class="chart-card">
      <mat-card-title>Relación entre aceitunas cosechadas y aceite producido</mat-card-title>
      <mat-card-content>
        <canvas baseChart [data]="scatterChartData" [options]="scatterChartOptions" chartType="scatter"></canvas>
      </mat-card-content>
    </mat-card>
  </div>
  